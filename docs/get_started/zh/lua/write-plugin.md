
# Lua插件编写

如果要体验udbg的所有功能，绕不开编写lua脚本

Lua插件其实就是一个目录(文件夹)，这个目录里的lua脚本按照一定结构来组织 不同时机所需要执行的lua脚本，在自己的lua脚本里又可以通过udbg提供的API来实现自定义命令、扩展GUI等功能

Lua插件能够扩展的事情包括：
- 自定义命令：编写一些自己需要的常用的命令，一个命令对应一个lua脚本
- 扩展GUI：可以在主窗口的菜单栏中加入自己的命令，也可在模块、线程等视图上添加自己的右键菜单选项，也可以按照一定布局创建自己的对话框，实现一些功能
- 其他功能：udbg提供了libffi的绑定，可以通过libffi调用系统函数来实现很多功能

## 插件目录结构

每一个插件目录都会加入到lua的模块搜索列表中，如果代码太多可以分拆成多个模块，然后通过require函数将对应的模块加载执行

- `udbg/client/__init.lua` **udbg客户端**初始化之后，执行每个插件目录下的 `udbg/client/__init.lua`
- `udbg/__init.lua` **udbg初始化完成**后，执行此脚本；
- `autorun/` 目录下的lua文件会被监听，**保存时**udbg自动执行，可用于临时测试一些lua片段

## 编写一个插件
